+++
date = '2025-07-08T19:58:56+08:00'
title = 'UniConnect 带CAN的高速下载器(一)'

draft = false
tags = ["ch32", "usb2.0", "cherryUSB", "cmsis-dap", "虚拟串口", "下载器"]
categories = ["ch32"]
featuredImagePreview = "/images/posts/uinconnect.png"
+++

# 初衷
公司一直用的周立功的CAN盒，一个银色的大盒子，经常连不上电脑，还要单独打驱动，二次开发时换个dll库就又不能用了，兼容性差的一批...
对此我的评价是：辣鸡的不行，淦，不如劳资自己做一个，顺带说一句：zlg fk u 🖕。

## 明确需求
1. 需要满足日常调试需求, 包括虚拟串口、调试下载、双路CAN帧收发
2. 速度要够快，满足双路CAN同时收发，每路最大速度8000帧/秒
3. 没有防静电需求，日常使用会滴胶或套热缩管，杜绝静电直接打到板子上

## 芯片选型
其实想要满足这样高速需求且带USB带CAN的芯片蛮少的，但还是让我找到一个，沁恒的`CH32V305CCT6`，带高速USB、内置PHY、带两路CAN...
靠，这不就是为我准备的吗？主控有了，其他都好说，CAN收发器公司用的`SN65HVD251DR`，拿来直接用，额，好像没有其他芯片需要特别注意了。

## PCB设计
PCB没有太多要注意的，唯一一个USB2.0需要注意一下，走差分线，然后计算一下阻抗，USB2.0需要90Ω差分阻抗，立创可以白嫖的阻抗方案有两种，这里
选用了`JLC04161H-3313`, 这个走线细一点。最后2d效果图如下：
<img src="/images/posts/uniconnect_pcb2d.png"></img>

## 小结
立创还是蛮有效率的，板子才4天就已经拿到了，但是物料还没到齐，下次再给大家展示本焊武帝的水平叭。最后看一下我的迷你小板，和500ml装的农夫山泉瓶盖对比：
<img src="/images/posts/uniconnect_pcb_null.png"></img>
